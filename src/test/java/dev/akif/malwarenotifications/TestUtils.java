package dev.akif.malwarenotifications;

import lombok.NonNull;
import lombok.val;
import org.springframework.data.domain.Page;

import java.util.List;
import java.util.Objects;

public final class TestUtils {
    public static <A> void assertPageHas(@NonNull List<A> expected, @NonNull Page<A> actual) {
        if (expected.size() != actual.getNumberOfElements()) {
            throw new AssertionError("Expected page size to be " + expected.size() + " but was " + actual.getNumberOfElements());
        }

        val iterator = actual.iterator();
        int i = 0;
        while (iterator.hasNext()) {
            val fromPage = iterator.next();
            val fromList = expected.get(i);

            if (Objects.equals(fromPage, fromList)) {
                i++;
            } else {
                throw new AssertionError("Expected " + fromList + " at index " + i + " but got " + fromPage);
            }
        }
    }
}
