package dev.akif.malwarenotifications.persistence.device;

import lombok.NonNull;

import java.util.HashMap;
import java.util.Map;
import java.util.Optional;
import java.util.UUID;

public class InMemoryDeviceRepository implements DeviceRepository {
    private final Map<UUID, DeviceEntity> devices = new HashMap<>();

    public InMemoryDeviceRepository(@NonNull DeviceEntity... deviceEntities) {
        for (DeviceEntity deviceEntity : deviceEntities) {
            devices.put(deviceEntity.getId(), deviceEntity);
        }
    }

    @Override
    public void createOrUpdate(@NonNull DeviceEntity device) {
        devices.put(device.getId(), device);
    }

    @Override
    public @NonNull Optional<DeviceEntity> findById(@NonNull UUID id) {
        return Optional.ofNullable(devices.get(id));
    }
}
