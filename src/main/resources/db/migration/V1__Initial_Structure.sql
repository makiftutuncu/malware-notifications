CREATE TYPE device_type AS ENUM ('WEB', 'ANDROID', 'IOS');

CREATE TABLE devices(
    id UUID PRIMARY KEY,
    type device_type NOT NULL,
    model TEXT NOT NULL,
    os TEXT NOT NULL
);

CREATE TYPE detection_type AS ENUM ('NEW', 'RESOLVED');

CREATE TABLE detections(
    id UUID PRIMARY KEY,
    device_id UUID NOT NULL REFERENCES devices(id),
    time TIMESTAMP WITH TIME ZONE NOT NULL,
    type detection_type NOT NULL DEFAULT 'NEW'::detection_type,
    app_name TEXT NULL,
    app_type TEXT NULL
);
